<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>ãƒ’ãƒƒãƒˆï¼†ãƒ–ãƒ­ãƒ¼ 2äººå¯¾æˆ¦</title>
</head>
<body>
<script>
  let N = 3; // æ¡æ•°
  let comp_array = [];
  let valid = false;
  let guessLog = ""; // ãƒ­ã‚°ç”¨æ–‡å­—åˆ—
  let turn = 0;

  // ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼1ãŒç­”ãˆã‚’è¨­å®š
  while (!valid) {
    let secret = prompt("ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼1ï¼šç§˜å¯†ã® " + N + " æ¡ã®æ•°å­—ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ï¼ˆé‡è¤‡ãªã—ãƒ»ä»–ã®äººã«è¦‹ã‚‰ã‚Œãªã„ã‚ˆã†ã«ï¼‰");
    if (!/^\d+$/.test(secret) || secret.length !== N) {
      alert("æ•°å­—ã¯ " + N + " æ¡ã§å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚");
      continue;
    }

    comp_array = secret.split('').map(Number);
    if (new Set(comp_array).size !== N) {
      alert("æ•°å­—ãŒé‡è¤‡ã—ã¦ã„ã¾ã™ã€‚ç•°ãªã‚‹æ•°å­—ã«ã—ã¦ãã ã•ã„ã€‚");
      continue;
    }

    valid = true;
  }

  let finished = false;

  while (!finished) {
    let guess = prompt("ã€" + (turn + 1) + "ã‚¿ãƒ¼ãƒ³ç›®ã€‘ ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼2ï¼šäºˆæƒ³ã™ã‚‹ " + N + " æ¡ã®æ•°å­—ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ï¼ˆé‡è¤‡ãªã—ï¼‰");

    if (!/^\d+$/.test(guess) || guess.length !== N) {
      alert("æ•°å­—ã¯ " + N + " æ¡ã§å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚");
      continue;
    }

    let user_array = guess.split('').map(Number);
    if (new Set(user_array).size !== N) {
      alert("æ•°å­—ãŒé‡è¤‡ã—ã¦ã„ã¾ã™ã€‚ç•°ãªã‚‹æ•°å­—ã«ã—ã¦ãã ã•ã„ã€‚");
      continue;
    }

    turn++;

    // ãƒ’ãƒƒãƒˆæ•°ã‚«ã‚¦ãƒ³ãƒˆ
    let countH = 0;
    for (let i = 0; i < N; i++) {
      if (user_array[i] === comp_array[i]) {
        countH++;
      }
    }

    // ãƒ’ãƒƒãƒˆï¼‹ãƒ–ãƒ­ãƒ¼ã‚’ã‚«ã‚¦ãƒ³ãƒˆ
    let countHB = 0;
    for (let i = 0; i < N; i++) {
      for (let j = 0; j < N; j++) {
        if (user_array[i] === comp_array[j]) {
          countHB++;
        }
      }
    }

    let countB = countHB - countH;

    // ãƒ­ã‚°è¨˜éŒ²
    guessLog += turn + "å›ç›®ï¼š" + guess + " â†’ " + countH + "H " + countB + "B\n";

    // çµæœè¡¨ç¤º
    alert(countH + "H " + countB + "B");

    if (countH === N) {
      alert("ğŸ‰ æ­£è§£ï¼ ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼2ã®å‹ã¡ï¼");
      alert("ğŸ”¢ ãƒ—ãƒ¬ã‚¤ãƒ­ã‚°ï¼š\n\n" + guessLog);
      finished = true;
    }
  }
</script>
</body>
</html>
